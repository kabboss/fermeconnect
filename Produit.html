<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FarmsConnect Marketplace</title>
    <link rel="icon" type="image/png" href="img/FarmsConnect.jpg"> <!-- Chemin vers votre image -->
    <link rel="stylesheet" href="Produit.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body>
    <header>
        <h2>Produits</h2>
        <nav>
            <ul>
                <li><a href="Acceuil.html">Accueil</a></li>
                <li><a href="Produit.html">Produits</a></li>
                <li><a href="index.html">Connexion</a></li>
                <li><a href="apropo.html">À propos</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
        </nav>
    </header>


<section class="categories">
    <div class="category-list">
        <button onclick="showCategory('volailles')">Volailles</button>
        <button onclick="showCategory('mammals')">Ruminants</button>
        <button onclick="showCategory('fish')">Poissons</button>
        <button onclick="showCategory('reptiles')">Reptiles</button>
    </div>
</section>

<section class="products" id="product-display">
    <div class="product-list" id="product-list">
        <div class="product volailles">
            <img src="img/poule.jpg" alt="Poule">
            <h3>Poule fermière</h3>
            <p>5000 FCFA</p>
            <label for="quantity-poule">Quantité:</label>
            <input type="number" id="quantity-poule" min="1" value="1">
            <label for="weight-poule">Poids (kg):</label>
            <input type="number" id="weight-poule" min="0.1" step="0.1" value="1">
            <button onclick="acheterProduit('Poule fermière', 5000, 'quantity-poule', 'weight-poule')">Acheter</button>
        </div>
        <div class="product volailles">
            <img src="img/Coq.jpg" alt="Coq">
            <h3>Coq</h3>
            <p>5000 FCFA</p>
            <label for="quantity-coq">Quantité:</label>
            <input type="number" id="quantity-coq" min="1" value="1">
            <label for="weight-coq">Poids (kg):</label>
            <input type="number" id="weight-coq" min="0.1" step="0.1" value="1">
            <button onclick="acheterProduit('Coq', 5000, 'quantity-coq', 'weight-coq')">Acheter</button>
        </div>
        <div class="product volailles">
            <img src="img/dinde.jpg" alt="Dinde">
            <h3>Dinde de Noël</h3>
            <p>15 000 FCFA</p>
            <label for="quantity-dinde">Quantité:</label>
            <input type="number" id="quantity-dinde" min="1" value="1">
            <label for="weight-dinde">Poids (kg):</label>
            <input type="number" id="weight-dinde" min="0.1" step="0.1" value="1">
            <button onclick="acheterProduit('Dinde de Noël', 15000, 'quantity-dinde', 'weight-dinde')">Acheter</button>
        </div>
        <div class="product volailles">
            <img src="img/canard.jpg" alt="Canard">
            <h3>Canard de Pékin</h3>
            <p>10 000 FCFA</p>
            <label for="quantity-canard">Quantité:</label>
            <input type="number" id="quantity-canard" min="1" value="1">
            <label for="weight-canard">Poids (kg):</label>
            <input type="number" id="weight-canard" min="0.1" step="0.1" value="1">
            <button onclick="acheterProduit('Canard de Pékin', 10000, 'quantity-canard', 'weight-canard')">Acheter</button>
        </div>
        <div class="product volailles">
            <img src="img/oie.jpg" alt="Oie">
            <h3>Oie Grasse</h3>
            <p>25 000 FCFA</p>
            <label for="quantity-oie">Quantité:</label>
            <input type="number" id="quantity-oie" min="1" value="1">
            <label for="weight-oie">Poids (kg):</label>
            <input type="number" id="weight-oie" min="0.1" step="0.1" value="1">
            <button onclick="acheterProduit('Oie Grasse', 25000, 'quantity-oie', 'weight-oie')">Acheter</button>
        </div>
        <div class="product volailles">
            <img src="img/pintade.jpg" alt="Pintade">
            <h3>Pintade fermière</h3>
            <p>8 000 FCFA</p>
            <label for="quantity-pintade">Quantité:</label>
            <input type="number" id="quantity-pintade" min="1" value="1">
            <label for="weight-pintade">Poids (kg):</label>
            <input type="number" id="weight-pintade" min="0.1" step="0.1" value="1">
            <button onclick="acheterProduit('Pintade fermière', 8000, 'quantity-pintade', 'weight-pintade')">Acheter</button>
        </div>
    </div>
</section>

<section class="products" id="mammals-list">
    <div class="product-list" id="mammals-list-items">
        <div class="product mammals">
            <img src="img/vache.jpg" alt="Vache">
            <h3>Vache</h3>
            <p>Prix: 300 000 FCFA</p>
            <label for="quantity-vache">Quantité:</label>
            <input type="number" id="quantity-vache" min="1" value="1">
            <label for="weight-vache">Poids (kg):</label>
            <input type="number" id="weight-vache" min="0.1" step="0.1" value="1">
            <button onclick="acheterProduit('Vache', 300000, 'quantity-vache', 'weight-vache')">Acheter</button>
        </div>
        <div class="product mammals">
            <img src="img/mouton.jpg" alt="Mouton">
            <h3>Mouton</h3>
            <p>Prix: 150 000 FCFA</p>
            <label for="quantity-mouton">Quantité:</label>
            <input type="number" id="quantity-mouton" min="1" value="1">
            <label for="weight-mouton">Poids (kg):</label>
            <input type="number" id="weight-mouton" min="0.1" step="0.1" value="1">
            <button onclick="acheterProduit('Mouton', 150000, 'quantity-mouton', 'weight-mouton')">Acheter</button>
        </div>
        <div class="product mammals">
            <img src="img/chevre.jpg" alt="Chèvre">
            <h3>Chèvre</h3>
            <p>Prix: 80 000 FCFA</p>
            <label for="quantity-chevre">Quantité:</label>
            <input type="number" id="quantity-chevre" min="1" value="1">
            <label for="weight-chevre">Poids (kg):</label>
            <input type="number" id="weight-chevre" min="0.1" step="0.1" value="1">
            <button onclick="acheterProduit('Chèvre', 80000, 'quantity-chevre', 'weight-chevre')">Acheter</button>
        </div>
        <div class="product mammals">
            <img src="img/cheval.jpg" alt="Cheval">
            <h3>Cheval</h3>
            <p>Prix: 500 000 FCFA</p>
            <label for="quantity-cheval">Quantité:</label>
            <input type="number" id="quantity-cheval" min="1" value="1">
            <label for="weight-cheval">Poids (kg):</label>
            <input type="number" id="weight-cheval" min="0.1" step="0.1" value="1">
            <button onclick="acheterProduit('Cheval', 500000, 'quantity-cheval', 'weight-cheval')">Acheter</button>
        </div>
        <div class="product mammals">
            <img src="img/cochon.jpg" alt="Cochon">
            <h3>Cochon</h3>
            <p>Prix: 120 000 FCFA</p>
            <label for="quantity-cochon">Quantité:</label>
            <input type="number" id="quantity-cochon" min="1" value="1">
            <label for="weight-cochon">Poids (kg):</label>
            <input type="number" id="weight-cochon" min="0.1" step="0.1" value="1">
            <button onclick="acheterProduit('Cochon', 120000, 'quantity-cochon', 'weight-cochon')">Acheter</button>
        </div>
        <div class="product mammals">
            <img src="img/chameau.jpg" alt="Chameau">
            <h3>Chameau</h3>
            <p>Prix: 700 000 FCFA</p>
            <label for="quantity-chameau">Quantité:</label>
            <input type="number" id="quantity-chameau" min="1" value="1">
            <label for="weight-chameau">Poids (kg):</label>
            <input type="number" id="weight-chameau" min="0.1" step="0.1" value="1">
            <button onclick="acheterProduit('Chameau', 700000, 'quantity-chameau', 'weight-chameau')">Acheter</button>
        </div>
    </div>
</section>

<section class="products" id="fish-list">
    <div class="product-list" id="fish-list-items">
        <div class="product fish">
            <img src="img/tilapia.jpg" alt="Tilapia">
            <h3>Tilapia</h3>
            <p>Prix: 2 000 FCFA</p>
            <label for="quantity-tilapia">Quantité:</label>
            <input type="number" id="quantity-tilapia" min="1" value="1">
            <label for="weight-tilapia">Poids (kg):</label>
            <input type="number" id="weight-tilapia" min="0.1" step="0.1" value="1">
            <button onclick="acheterProduit('Tilapia', 2000, 'quantity-tilapia', 'weight-tilapia')">Acheter</button>
        </div>
        <div class="product fish">
            <img src="img/poisson.jpg" alt="Poisson">
            <h3>Poisson du jour</h3>
            <p>Prix: 2 500 FCFA</p>
            <label for="quantity-poisson">Quantité:</label>
            <input type="number" id="quantity-poisson" min="1" value="1">
            <label for="weight-poisson">Poids (kg):</label>
            <input type="number" id="weight-poisson" min="0.1" step="0.1" value="1">
            <button onclick="acheterProduit('Poisson du jour', 2500, 'quantity-poisson', 'weight-poisson')">Acheter</button>
        </div>
        <div class="product fish">
            <img src="img/saumon.jpg" alt="Saumon">
            <h3>Saumon</h3>
            <p>Prix: 5 000 FCFA</p>
            <label for="quantity-saumon">Quantité:</label>
            <input type="number" id="quantity-saumon" min="1" value="1">
            <label for="weight-saumon">Poids (kg):</label>
            <input type="number" id="weight-saumon" min="0.1" step="0.1" value="1">
            <button onclick="acheterProduit('Saumon', 5000, 'quantity-saumon', 'weight-saumon')">Acheter</button>
        </div>
        <div class="product fish">
            <img src="img/thon.jpg" alt="Thon">
            <h3>Thon</h3>
            <p>Prix: 4 500 FCFA</p>
            <label for="quantity-thon">Quantité:</label>
            <input type="number" id="quantity-thon" min="1" value="1">
            <label for="weight-thon">Poids (kg):</label>
            <input type="number" id="weight-thon" min="0.1" step="0.1" value="1">
            <button onclick="acheterProduit('Thon', 4500, 'quantity-thon', 'weight-thon')">Acheter</button>
        </div>
        <div class="product fish">
            <img src="img/maquereau.jpg" alt="Maquereau">
            <h3>Maquereau</h3>
            <p>Prix: 3 500 FCFA</p>
            <label for="quantity-maquereau">Quantité:</label>
            <input type="number" id="quantity-maquereau" min="1" value="1">
            <label for="weight-maquereau">Poids (kg):</label>
            <input type="number" id="weight-maquereau" min="0.1" step="0.1" value="1">
            <button onclick="acheterProduit('Maquereau', 3500, 'quantity-maquereau', 'weight-maquereau')">Acheter</button>
        </div>
        <div class="product fish">
            <img src="img/sardine.jpg" alt="Sardine">
            <h3>Sardine</h3>
            <p>Prix: 2 500 FCFA</p>
            <label for="quantity-sardine">Quantité:</label>
            <input type="number" id="quantity-sardine" min="1" value="1">
            <label for="weight-sardine">Poids (kg):</label>
            <input type="number" id="weight-sardine" min="0.1" step="0.1" value="1">
            <button onclick="acheterProduit('Sardine', 2500, 'quantity-sardine', 'weight-sardine')">Acheter</button>
        </div>
    </div>
</section>

<!-- Alert Box -->
<div id="alert-box" class="alert hidden">
    <span id="alert-message"></span>
    <button id="close-alert" onclick="closeAlert()">×</button>
</div>


<script>
    function acheterProduit(nomProduit, prix, quantityId, weightId) {
    const username = localStorage.getItem('username');
    const email = localStorage.getItem('email');
    const contact = localStorage.getItem('contact')

    // Vérifier si username et email sont définis
    if (!username || !email) {
        console.error('Nom d\'utilisateur ou e-mail non spécifié dans le localStorage');
        alert('Veuillez vous connecter pour passer une commande.');
        return; // Sortir de la fonction si les valeurs ne sont pas définies
    }

    const quantityElement = document.getElementById(quantityId);
    const weightElement = document.getElementById(weightId);

    // Vérifier si les éléments existent et contiennent des valeurs
    if (!quantityElement || !weightElement) {
        console.error('Les éléments pour la quantité ou le poids sont introuvables');
        alert('Erreur : éléments introuvables.');
        return;
    }

    const quantity = parseInt(quantityElement.value);
    const weight = parseFloat(weightElement.value);

    // Vérifiez que les valeurs ne sont pas NaN
    if (isNaN(quantity) || isNaN(weight)) {
        console.error('Valeurs de quantité ou de poids invalides');
        alert('Erreur : veuillez entrer des valeurs valides.');
        return;
    }

    const total = quantity * prix; // Calculer le prix total
    const poidsTotal = quantity * weight; // Calculer le poids total


    const orderDetails = {
        username: username,
        email: email,
        quantity: quantity,
        weight: poidsTotal,
        price: total,
        contact: contact, 
        Produit : nomProduit
    };

    console.log('Order Data:', orderDetails); // Log des données de commande

    // Envoyer la requête POST à l'API
    fetch('http://localhost:3002/api/order', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(orderDetails)
    })
    .then(response => {
        if (response.ok) {
            return response.text();
        } else {
            throw new Error('Erreur lors de la commande');
        }
    })
   
    .then(data => {
    showAlert('Commande passée avec succès! Nous vous avons envoyer un mail contenant les details de votre commande '); // Utilisation de l'alerte personnalisée
    console.log(data); // Affiche la réponse du serveur dans la console
})

    .catch(error => {
        console.error('Erreur lors de la commande :', error);
        alert('Erreur lors de la commande : ' + error.message);
    });
}

    </script>
    

<script>
    function showAlert(message) {
    const alertBox = document.getElementById('alert-box');
    const alertMessage = document.getElementById('alert-message');
    
    alertMessage.textContent = message; // Définir le message de l'alerte
    alertBox.classList.remove('hidden'); // Afficher l'alerte

    // Masquer l'alerte après 5 secondes (facultatif)
    setTimeout(closeAlert, 10000);
}

function closeAlert() {
    const alertBox = document.getElementById('alert-box');
    alertBox.classList.add('hidden'); // Masquer l'alerte
}

</script>


<section class="about">
    <h2>À propos de FarmsConnect</h2>
    <p>FarmsConnect est une plateforme innovante dédiée aux éleveurs et au particuliers au Burkina Faso, permettant l'échange et la vente de produits d'élevage. Notre mission est de soutenir les agriculteurs et eleveurs en particuliers et d'améliorer leur revenu grâce à des outils modernes.</p>
</section>

<section class="testimonials">
    <h2>Avis de nos utilisateurs</h2>
    <div class="testimonial">
        <p>"FarmsConnect a transformé ma façon de vendre mes animaux. La plateforme est facile à utiliser et j'ai trouvé de nouveaux clients rapidement!"</p>
        <cite>- Éleveur local</cite>
    </div>
    <div class="testimonial">
        <p>"Les conseils et la formation offerts par FarmsConnect m'ont aidé à améliorer ma production!"</p>
        <cite>- Agriculteur heureux</cite>
    </div>
</section>

<footer>
    <p>&copy; 2024 FarmsConnect. Tous droits réservés.</p>
</footer>

<script src="script_Acceuil.js"></script>
</body>
</html>